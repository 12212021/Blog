## 数据的抽象

### 有理数数据例子
有理数的需要满足下面的加减乘除和相等判断：
![image.png](https://i.loli.net/2019/11/13/WTDxOkHvFir6Ys9.png)
这里采用一种**按愿望思维**的方式来构建整个有理数的加减乘除运算
- 假设有理数存在分子选择函数
- 假设有理数存在分母选择函数
- 假设存在这个一个构造函数，能够根据给定的分子和分母构造一个有理数出来

在下面的js代码中，addRat、subRat...等函数依赖于有理数上面的三种假设函数，跟有理数的具体实现是无关的，这样的话就建立了一个数据的屏障
```js
function addRat(x, y) {
    xNumer = numer(x);
    yNumer = numer(y);
    xDenom = denom(x);
    yDenom = denom(y);
    return makeRat(xNumer * yDenom + yNumer * xDenom, xDenom * yDenom);
}

function subRat(x, y) {
    xNumer = numer(x);
    yNumer = numer(y);
    xDenom = denom(x);
    yDenom = denom(y);
    return makeRat(xNumer * yDenom - yNumer * xDenom, xDenom * yDenom);
}

function mulRat(x, y) {
    xNumer = numer(x);
    yNumer = numer(y);
    xDenom = denom(x);
    yDenom = denom(y);
    return makeRat(xNumer * yNumer, xDenom * yDenom);
}
function divrat(x, y) {
    xNumer = numer(x);
    yNumer = numer(y);
    xDenom = denom(x);
    yDenom = denom(y);
    return makeRat(xNumer * yDenom, yNumer * xDenom);
}

function equalRat(x, y) {
    xNumer = numer(x);
    yNumer = numer(y);
    xDenom = denom(x);
    yDenom = denom(y);
    return xNumer * yDenom === yNumer * xDenom;
}

// 这个是采用数组实现的有理数
/* 
function makeRat(numer, denom) {
    return [numer, denom];
}

function numer(num) {
    return num[0];
}

function denom(num) {
    return num[1];
}
 */
// 这个是采用js对象的方式实现的有理数
function makeRat(numer, denom) {
    return {
        numer,
        denom
    };
}

function numer(num) {
    return num.numer;
}

function denom(num) {
    return num.denom;
}

// gcd(a, b) = gcd(b, r) r = a % b
// gcd(a, 0) = a
function gcd(a, b) {
    if (b === 0) {
        return a;
    } else {
        let r = a % b;
        return gcd(b, r);
    }
}

function display(num) {
    const numberNumer = numer(num);
    const numberDenom = denom(num);
    const numberGcd = gcd(numberNumer, numberDenom);
    console.log(`${numberNumer / numberGcd}/${numberDenom / numberGcd}`);
}
```
数据屏障的示意图如图所示：
![image.png](https://i.loli.net/2019/11/13/ywbTAzxC1edO2vB.png)

### 数据到底是什么
### 数据闭包的意义
### 序列作为约定的处理界面
### 面向对象的数据和消息传递